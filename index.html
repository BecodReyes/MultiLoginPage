<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>MultiLogin</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="支持多Yggdrasil的外置登入插件">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/css/0.styles.0da0ed51.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/js/app.16324454.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/js/2.9b9f6b0c.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/js/5.36ad58b4.js" as="script"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/js/3.5a48664d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/js/4.4701e25e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/js/6.bf8afed2.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/css/0.styles.0da0ed51.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="ant-row"><div class="nav-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" aria-current="page" class="router-link-exact-active router-link-active no-logo home-link"><!----> <span class="site-name">MultiLogin</span></a> <!----></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><!----> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-submenu-selected"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          选择语言
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/CaaMoe/MultiLogin" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <!----> <div><main aria-labelledby="main-title" class="home"><header class="hero"><!----> <h1 id="main-title">
        MultiLogin
      </h1> <p class="description">
        支持多Yggdrasil的外置登入插件
      </p> <!----> <!----></header> <!----> <div class="theme-antdocs-content custom content__default"><p><img src="https://bstats.org/signatures/bukkit/MultiLoginR.svg" alt="MultiLoginR"></p> <div align="center"><h1 id="multilogin"><a href="#multilogin" class="header-anchor">#</a> MultiLogin</h1> <p><em>✨ 支持多Yggdrasil的外置登入插件 ✨</em></p></div> <h1 id="功能"><a href="#功能" class="header-anchor">#</a> 功能</h1> <ul><li>多 Yggdrasil 共存</li> <li>可控制玩家在游戏内的 UUID</li> <li>支持 Yggdrasil 分组管理的白名单系统</li> <li>阻止服务器出现同名账户</li> <li>防止出现抢注服务器内 ID 的情况</li> <li>账户安全保护机制</li> <li>支持 Bukkit, Bungee, Velocity, Fabric</li></ul> <br> <h2 id="关于混合验证登入的安全性问题"><a href="#关于混合验证登入的安全性问题" class="header-anchor">#</a> 关于混合验证登入的安全性问题</h2> <p>MultiLogin能很好的处理角色重名和UUID重复的问题，并且还提供了设置角色在游戏中UUID的功能，
以及实现了依据不同验证服务器分组管理的白名单系统和角色名称限制服务。</p> <p>如果要真有俩角色的在线 UUID 相同，MultiLogin 会根据在线 UUID 查询上次登入时所使用的验证服务器的
path 来判断是否允许登入。</p> <p>理论上不存在什么安全性问题，除非没想到...</p> <br> <h1 id="如何使用"><a href="#如何使用" class="header-anchor">#</a> 如何使用</h1> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>与同类型程序相比，MultiLogin 不需要修改或添加任何服务端启动参数<code>（不需要安装任何 authlib-injector 以及同类型前置程序）</code>， 只需将适合服务端的插件本体丢入 plugins 文件夹下即可。</p> <h2 id="添加一个-yggdrasil-账户验证服务器"><a href="#添加一个-yggdrasil-账户验证服务器" class="header-anchor">#</a> 添加一个 Yggdrasil 账户验证服务器</h2> <p>插件现在支持添加几乎所有类型的 Yggdrasil 账户验证服务器，具体设置方法如下：</p> <h3 id="模板"><a href="#模板" class="header-anchor">#</a> 模板：</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code>    <span class="token comment"># 节点名称作为插件内标记名称，一旦设置请谨慎修改它。</span>
    <span class="token comment"># 该标记名称作为系统识别 Yggdrasil 验证服务器的依据。胡乱更改会导致系统无法验证用户身份而被拒绝用户登入游戏。</span>
    <span class="token comment"># 您可以仿写此节点用来添加新的 Yggdrasil 验证服务器。</span>
    <span class="token key atrule">demo</span><span class="token punctuation">:</span>

      <span class="token comment"># 启用该验证服务器。</span>
      <span class="token comment"># 关闭它将拒绝所有使用该 Yggdrasil 账户验证登入的玩家登入游戏。</span>
      <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

      <span class="token comment"># 该验证服务器的别称，作为 Yggdrasil 账户验证服务器的 display</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'demo yggdrasil service'</span>

      <span class="token comment"># Yggdrasil 验证服务器的基本属性设置。</span>
      <span class="token key atrule">body</span><span class="token punctuation">:</span>

        <span class="token comment"># Yggdrasil 验证服务器服务端 hasJoin 部分验证请求链接设置。</span>
        <span class="token comment"># 必须指定完整的请求链接，其中 GET 请求中的变量 {0} 表示 username ，变量 {1} 表示 serverId ，变量 {2} 表示 passIpContent 节点所设置内容。</span>
        <span class="token comment">#       （比如：‘https://example.com/yggdrasil/session/hasJoined?username={0}&amp;serverId={1}{2}’ ，若是POST请求，则需填写完整的请求链接即可）。</span>
        <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">&quot;https://example.com/yggdrasil/session/hasJoined?username={0}&amp;serverId={1}{2}&quot;</span>

        <span class="token comment"># 以 post 请求方式验证账户身份</span>
        <span class="token comment"># 绝大多数下， Yggdrasil 验证服务器都使用 GET 请求方式验证用户数据的，</span>
        <span class="token comment"># 如果你不了解当前 Yggdrasil 验证流程的话，请勿擅自修改它。</span>
        <span class="token comment"># 仅当 serverType 节点值为 ‘CUSTOM’ 时，此节点才有效。</span>
        <span class="token key atrule">postMode</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

        <span class="token comment"># hasJoin 阶段是否传递用户 IP 信息，如果存在。</span>
        <span class="token comment"># 若不了解当前 Yggdrasil 验证流程的话，请勿擅自修改它。</span>
        <span class="token key atrule">passIp</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

        <span class="token comment"># 设置 url 节点 {2} 变量内容，</span>
        <span class="token comment"># 其中，变量 {0} 为所获取到的 IP 信息。</span>
        <span class="token comment"># 仅当 passIp 节点为 true 时此节点有效。</span>
        <span class="token key atrule">passIpContent</span><span class="token punctuation">:</span> <span class="token string">&quot;ip={0}&quot;</span>

        <span class="token comment"># 设置 post 的请求内容。</span>
        <span class="token comment"># 仅当 postMode 节点值为 true 时，此节点才有效。</span>
        <span class="token comment"># 其中 GET 请求中的变量 {0} 表示 username ，变量 {1} 表示 serverId</span>
        <span class="token comment"># 内容不包含 IP 信息，请不要添加额外的参数</span>
        <span class="token key atrule">postContent</span><span class="token punctuation">:</span> <span class="token string">'{&quot;username&quot;:&quot;{0}&quot;, &quot;serverId&quot;:&quot;{1}&quot;}'</span>

      <span class="token comment"># 当某名玩家第一次在此节点所设置的验证服务器中验证通过后，游戏内的 UUID 会按照此节点所填写的规则来生成：</span>
      <span class="token comment"># 目前只支持以下值:</span>
      <span class="token comment">#   DEFAULT   - 使用 Yggdrasil 验证服务器提供的UUID</span>
      <span class="token comment">#   OFFLINE   - 自动生成离线 UUID（盗版UUID）</span>
      <span class="token comment">#   RANDOM    - 随机 UUID</span>
      <span class="token comment"># 请谨慎设置和修改此节点，避免增加日后维护的心智负担。</span>
      <span class="token comment"># 为避免触发 Paper 端的某些机制，强烈建议此值为 DEFAULT</span>
      <span class="token key atrule">convUuid</span><span class="token punctuation">:</span> DEFAULT

      <span class="token comment"># 当某名玩家第一次登入成功后，若通过节点 ‘convUuid’ 所生成的 UUID 已被使用时，则自动修正为随机的 UUID 避免数据错乱。</span>
      <span class="token comment"># 请尽量保持此值为 true ，除非您了解后果是什么（虽然几率很小）。</span>
      <span class="token key atrule">convRepeat</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

      <span class="token comment"># 玩家允许设置的用户名正则，不匹配将会拒绝登入请求。</span>
      <span class="token key atrule">nameAllowedRegular</span><span class="token punctuation">:</span> <span class="token string">'^[0-9a-zA-Z_]{2,10}$'</span>

      <span class="token comment"># 是否为当前验证服务器单独设置白名单。</span>
      <span class="token comment"># 当全局白名单为true时，此节点无效。</span>
      <span class="token key atrule">whitelist</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

      <span class="token comment"># 当服务器中有相同 Redirect UUID 的玩家是否拒绝登入，</span>
      <span class="token comment"># 若为 false 将把游戏内玩家踢出，验证中玩家成功登入（原版机制）</span>
      <span class="token comment"># 若为 true 则拒绝当前登入请求</span>
      <span class="token key atrule">refuseRepeatedLogin</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

      <span class="token comment"># 验证错误重试次数</span>
      <span class="token key atrule">authRetry</span><span class="token punctuation">:</span> <span class="token number">1</span>
</code></pre></div><br> <h2 id="例子"><a href="#例子" class="header-anchor">#</a> 例子</h2> <ul><li>添加 Minecraft 原版验证服务器</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code>      <span class="token key atrule">officialCustom</span><span class="token punctuation">:</span>
        <span class="token key atrule">body</span><span class="token punctuation">:</span>
              <span class="token comment"># 这是原版验证服务器 HasJoin 阶段向 Yggdrasil 账户验证服务器所请求的 URL</span>
              <span class="token comment"># 其中，变量 {0} 表示 username ，变量 {1} 表示 serverId ，变量 {2} 表示 passIpContent 节点所设置的内容</span>
              <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">&quot;https://sessionserver.mojang.com/session/minecraft/hasJoined?username={0}&amp;serverId={1}{2}&quot;</span>
</code></pre></div><ul><li>添加 Blessing Skin 类型验证服务器</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code>      <span class="token key atrule">blessingSkinCustom</span><span class="token punctuation">:</span>
        <span class="token key atrule">body</span><span class="token punctuation">:</span>
              <span class="token comment"># 假如当前 Blessing Skin 的 Yggdrasil api 地址为 {0} ，则 url 值应该为 ‘{0}/sessionserver/session/minecraft/hasJoined?username={0}&amp;serverId={1}{2}’</span>
              <span class="token comment"># 其中，变量 {0} 表示 username ，变量 {1} 表示 serverId ，变量 {2} 表示 passIpContent 节点所设置的内容</span>
              <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">&quot;{0}/sessionserver/session/minecraft/hasJoined?username={0}&amp;serverId={1}{2}&quot;</span>
</code></pre></div><br> <h1 id="命令和权限"><a href="#命令和权限" class="header-anchor">#</a> 命令和权限</h1> <table><thead><tr><th style="text-align:left;">命令</th> <th style="text-align:left;">权限</th> <th style="text-align:left;">简介</th></tr></thead> <tbody><tr><td style="text-align:left;">/whitelist add &lt;target&gt;</td> <td style="text-align:left;">multilogin.whitelist</td> <td style="text-align:left;">将 target 添加到白名单中</td></tr> <tr><td style="text-align:left;">/whitelist remove &lt;target&gt;</td> <td style="text-align:left;">multilogin.whitelist</td> <td style="text-align:left;">移除 target 的白名单</td></tr> <tr><td style="text-align:left;">/multilogin reload</td> <td style="text-align:left;">multilogin.multilogin.reload</td> <td style="text-align:left;">重新加载配置文件</td></tr> <tr><td style="text-align:left;">/multilogin query name &lt;target&gt;</td> <td style="text-align:left;">multilogin.multilogin.query</td> <td style="text-align:left;">以 name 查询玩家数据</td></tr> <tr><td style="text-align:left;">/multilogin query redirectuuid &lt;target&gt;</td> <td style="text-align:left;">multilogin.multilogin.query</td> <td style="text-align:left;">以 redirectuuid 查询玩家数据</td></tr> <tr><td style="text-align:left;">/multilogin query onlineuuid &lt;target&gt;</td> <td style="text-align:left;">multilogin.multilogin.query</td> <td style="text-align:left;">以 onlineuuid 查询玩家数据</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">multilogin.update</td> <td style="text-align:left;">接收新版本通知</td></tr></tbody></table> <br> <h1 id="placeholderapi-变量-仅限bukkit"><a href="#placeholderapi-变量-仅限bukkit" class="header-anchor">#</a> PlaceholderAPI 变量 (仅限Bukkit)</h1> <table><thead><tr><th style="text-align:left;">变量</th> <th style="text-align:left;">简介</th></tr></thead> <tbody><tr><td style="text-align:left;">%multilogin_currentname%</td> <td style="text-align:left;">玩家当前的游戏 ID</td></tr> <tr><td style="text-align:left;">%multilogin_onlineuuid%</td> <td style="text-align:left;">玩家在线的 UUID</td></tr> <tr><td style="text-align:left;">%multilogin_redirecteduuid%</td> <td style="text-align:left;">玩家在游戏内的 UUID</td></tr> <tr><td style="text-align:left;">%multilogin_whitelist%</td> <td style="text-align:left;">玩家是否具有白名单</td></tr> <tr><td style="text-align:left;">%multilogin_yggdrasilname%</td> <td style="text-align:left;">玩家所在的 Yggdrasil 账户验证服务器的名字</td></tr> <tr><td style="text-align:left;">%multilogin_yggdrasilpath%</td> <td style="text-align:left;">玩家所在的 Yggdrasil 账户验证服务器的路径</td></tr></tbody></table> <br> <h1 id="贡献者"><a href="#贡献者" class="header-anchor">#</a> 贡献者</h1> <span class="ant-avatar ant-avatar-circle ant-avatar-image" style="width:54px;height:54px;line-height:54px;font-size:18px;"><img src="https://avatars.githubusercontent.com/u/70059785?v=4"></span>
 
<span class="ant-avatar ant-avatar-circle ant-avatar-image" style="width:54px;height:54px;line-height:54px;font-size:18px;"><img src="https://avatars.githubusercontent.com/u/28245341?v=4"></span>
 
<span class="ant-avatar ant-avatar-circle ant-avatar-image" style="width:54px;height:54px;line-height:54px;font-size:18px;"><img src="https://avatars.githubusercontent.com/u/35525491?v=4"></span>
 
<span class="ant-avatar ant-avatar-circle ant-avatar-image" style="width:54px;height:54px;line-height:54px;font-size:18px;"><img src="https://avatars.githubusercontent.com/u/80352861?v=4"></span> <p><a href="https://github.com/CaaMoe/MultiLogin/pulls" target="_blank" rel="noopener noreferrer">我也想为贡献者之一？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><br><br></p> <p>如果你在使用这个插件时有任何的疑问或建议，欢迎加入我们的 QQ
群互相讨论: <a href="https://jq.qq.com/?_wv=1027&amp;k=WrOTGIC7" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/QQ%20group-832210691-yellow?style=flat-square" alt="GitHub license"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></main> <div class="footer"><!----> <div class="footer-bottom">Page created by BecodReyes</div></div></div> <!----></div><div class="global-ui"><!----></div></div>
    <script src="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/js/app.16324454.js" defer></script><script src="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/js/2.9b9f6b0c.js" defer></script><script src="https://cdn.jsdelivr.net/gh/BecodReyes/MultiLoginPage@gh-pages/assets/js/5.36ad58b4.js" defer></script>
  </body>
</html>